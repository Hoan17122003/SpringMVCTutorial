<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <body>
        <table th:fragment="cartShopping" class="table table-bordered table-striped table-hover">
            <thead>
                <tr class="bg-primary">
                    <th class="text-center">STT</th>
                    <th class="text-center">Tên hàng</th>
                    <th class="text-center">ĐVT</th>
                    <th class="text-center">Số lượng</th>
                    <th class="text-center">Giá</th>
                    <th class="text-center">Thành tiền</th>
                    <th style="width: 40px"></th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item, iterStat : ${cartItems}">
                    <td class="text-center" th:text="${iterStat.count}">STT</td>
                    <td th:text="${item.getProductName()}">Tên hàng</td>
                    <td class="text-center" th:text="${item.getAmount()}">Số lượng</td>
                    <td class="text-right" th:text="${item.getSalePrice()}">Giá</td>
                    <td class="text-right" th:text="${item.getAmount() * item.getSalePrice()}">Thành tiền</td>
                    <td class="text-right">
                        <a
                            href="javascript:void(0);"
                            th:data-product-id="${item.ProductID}"
                            class="btn btn-xs btn-danger ajax-remove"
                        >
                            <i class="fa fa-minus"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="5" class="text-right">Tổng cộng:</th>
                    <th class="text-right" th:text="${totalPrice}">Tổng cộng</th>
                    <th></th>
                </tr>
            </tfoot>
        </table>
        <div class="text-right">
            <a href="javascript:void(0);" class="btn btn-sm btn-danger ajax-clear-cart">
                <i class="fa fa-trash"></i> Xóa giỏ hàng
            </a>
        </div>
        <!-- <script>
            $(document).on("click", ".ajax-remove", function () {
                var productId = $(this).data("product-id");
                $.ajax({
                    url: "/Order/RemoveFromCart/" + productId,
                    type: "GET",
                    success: function () {
                        showShoppingCart();
                    },
                    error: function () {
                        alert("Không thể xóa sản phẩm khỏi giỏ hàng!");
                    },
                });
            });

            $(document).on("click", ".ajax-clear-cart", function () {
                $.ajax({
                    url: "/Order/ClearCart",
                    type: "GET",
                    success: function () {
                        showShoppingCart();
                    },
                    error: function () {
                        alert("Không thể xóa giỏ hàng!");
                    },
                });
            });
        </script> -->
    </body>
</html>
